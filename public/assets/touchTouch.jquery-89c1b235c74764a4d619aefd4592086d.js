!function(){var t=$('<div id="galleryOverlay">'),e=$('<div id="gallerySlider">'),n=$('<a id="prevArrow"></a>'),o=$('<a id="nextArrow"></a>'),i=!1;$.fn.touchTouch=function(){function a(e){return i?!1:(t.show(),setTimeout(function(){t.addClass("visible")},100),c(e),void(i=!0))}function r(){return i?(t.hide().removeClass("visible"),i=!1,$(".placeholder").empty(),void(p=v)):!1}function c(t){e.css("left",100*-t+"%")}function l(t){setTimeout(function(){u(t)},1e3)}function u(t){return 0>t||t>=p.length?!1:void d(p.eq(t).attr("href"),function(){h.eq(t).html(this)})}function d(t,e){var n=$("<img>").on("load",function(){e.call(n)});n.attr("src",t)}function f(){g+1<p.length?(g++,c(g),l(g+1)):(e.addClass("rightSpring"),setTimeout(function(){e.removeClass("rightSpring")},500))}function s(){g>0?(g--,c(g),l(g-1)):(e.addClass("leftSpring"),setTimeout(function(){e.removeClass("leftSpring")},500))}var h=$([]),g=0,v=this,p=v;t.hide().appendTo("body"),e.appendTo(t),p.each(function(){h=h.add($('<div class="placeholder">'))}),e.append(h).on("click",function(t){$(t.target).is("img")||r()}),$("body").on("touchstart","#gallerySlider img",function(t){var n=t.originalEvent,o=n.changedTouches[0].pageX;return e.on("touchmove",function(t){t.preventDefault(),n=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],n.pageX-o>10?(e.off("touchmove"),s()):n.pageX-o<-10&&(e.off("touchmove"),f())}),!1}).on("touchend",function(){e.off("touchmove")}),p.on("click",function(t){t.preventDefault();var e,n,o=$(this),i=o.parent().closest("[data-gallery]");o.attr("data-gallery")?(e=o.attr("data-gallery"),n="item"):i.length&&(e=i.attr("data-gallery"),n="ancestor"),e&&"item"==n?p=$("[data-gallery="+e+"]"):e&&"ancestor"==n&&(p=p.filter(function(){return $(this).parent().closest("[data-gallery]").length})),g=p.index(this),a(g),u(g),l(g+1),l(g-1)}),"ontouchstart"in window||(t.append(n).append(o),n.click(function(t){t.preventDefault(),s()}),o.click(function(t){t.preventDefault(),f()})),$(window).bind("keydown",function(t){37==t.keyCode?s():39==t.keyCode&&f()})}}(jQuery);